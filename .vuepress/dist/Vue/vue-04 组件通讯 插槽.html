<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件通讯、插槽 | 前端学习圈</title>
    <meta name="description" content="一位小菜鸡">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.86c065f8.css" as="style"><link rel="preload" href="/assets/js/app.708942eb.js" as="script"><link rel="preload" href="/assets/js/2.c0515fc9.js" as="script"><link rel="preload" href="/assets/js/20.87ab9542.js" as="script"><link rel="prefetch" href="/assets/js/10.7e2130a0.js"><link rel="prefetch" href="/assets/js/11.45dd8b9d.js"><link rel="prefetch" href="/assets/js/12.ff7255af.js"><link rel="prefetch" href="/assets/js/13.41591b58.js"><link rel="prefetch" href="/assets/js/14.9a85c661.js"><link rel="prefetch" href="/assets/js/15.b3df8ab6.js"><link rel="prefetch" href="/assets/js/16.705387a2.js"><link rel="prefetch" href="/assets/js/17.3c779539.js"><link rel="prefetch" href="/assets/js/18.f20162bb.js"><link rel="prefetch" href="/assets/js/19.f7a98551.js"><link rel="prefetch" href="/assets/js/21.8128b0a7.js"><link rel="prefetch" href="/assets/js/22.37cd98cb.js"><link rel="prefetch" href="/assets/js/23.da83eb6c.js"><link rel="prefetch" href="/assets/js/24.45b47ad9.js"><link rel="prefetch" href="/assets/js/25.11572350.js"><link rel="prefetch" href="/assets/js/26.4159d489.js"><link rel="prefetch" href="/assets/js/27.d470e820.js"><link rel="prefetch" href="/assets/js/28.9d6e98a7.js"><link rel="prefetch" href="/assets/js/29.78bd88e2.js"><link rel="prefetch" href="/assets/js/3.e6720376.js"><link rel="prefetch" href="/assets/js/30.16bd39fb.js"><link rel="prefetch" href="/assets/js/4.88f64118.js"><link rel="prefetch" href="/assets/js/5.3c7ae1e5.js"><link rel="prefetch" href="/assets/js/6.ba7510ed.js"><link rel="prefetch" href="/assets/js/7.3a108297.js"><link rel="prefetch" href="/assets/js/8.8392fc9b.js"><link rel="prefetch" href="/assets/js/9.3ad6f573.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86c065f8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端学习圈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title">web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/app/" class="nav-link">
  app
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/html5、css3/" class="nav-link">
  html5、css3
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Server/" class="nav-link">
  Server
</a></li><li class="dropdown-item"><!----> <a href="/Typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/其他框架/" class="nav-link">
  其他框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/custom/" class="nav-link">
  自定义页面
</a></li><li class="dropdown-item"><!----> <a href="https://chat.heny.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息传输站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/heny/h-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title">web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/app/" class="nav-link">
  app
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/html5、css3/" class="nav-link">
  html5、css3
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Server/" class="nav-link">
  Server
</a></li><li class="dropdown-item"><!----> <a href="/Typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/其他框架/" class="nav-link">
  其他框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/custom/" class="nav-link">
  自定义页面
</a></li><li class="dropdown-item"><!----> <a href="https://chat.heny.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息传输站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/heny/h-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue文件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vue/vue-01 初识vue.html" class="sidebar-link">初识Vue</a></li><li><a href="/Vue/vue-02 修饰符 表单.html" class="sidebar-link">修饰符、表单</a></li><li><a href="/Vue/vue-03 组件 Prop.html" class="sidebar-link">组件、Props</a></li><li><a href="/Vue/vue-04 组件通讯 插槽.html" class="active sidebar-link">组件通讯、插槽</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#一、组件通讯" class="sidebar-link">一、组件通讯</a></li><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#二、插槽" class="sidebar-link">二、插槽</a></li><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#三、动态组件" class="sidebar-link">三、动态组件</a></li><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#四、v-once" class="sidebar-link">四、v-once</a></li><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#五、过滤器" class="sidebar-link">五、过滤器</a></li><li class="sidebar-sub-header"><a href="/Vue/vue-04 组件通讯 插槽.html#六、自定义指令" class="sidebar-link">六、自定义指令</a></li></ul></li><li><a href="/Vue/vue-05 过渡 生命周期.html" class="sidebar-link">过渡效果、生命周期</a></li><li><a href="/Vue/vue-06 路由.html" class="sidebar-link">Vue路由</a></li><li><a href="/Vue/vue-07 接口请求 跨域.html" class="sidebar-link">接口请求、跨域</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件通讯、插槽"><a href="#组件通讯、插槽" class="header-anchor">#</a> 组件通讯、插槽</h1> <p>[TOC]</p> <h2 id="一、组件通讯"><a href="#一、组件通讯" class="header-anchor">#</a> 一、组件通讯</h2> <h4 id="父传子"><a href="#父传子" class="header-anchor">#</a> 父传子</h4> <div class="language-html extra-class"><pre class="language-html"><code>父：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>message<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
子：child:{props:['msg']}  //使用props接收
</code></pre></div><ul><li>监听子组件的生命周期</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name"><span class="token namespace">@hook:</span>mounted</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="子传父"><a href="#子传父" class="header-anchor">#</a> 子传父</h4> <ul><li>直接传递</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>子：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>send<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
         send内容：this.$emit('custom','hello')
父：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">@custom</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>receive<span class="token punctuation">'</span></span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>message<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        receive(result){console.log(result)}
如果是在组件当中，需要使用EventBus传值；
</code></pre></div><ul><li>sync修饰符传递</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>子：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>send<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
      send内容： this.$emit('update:msg',newValue)

父：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:msg.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>message<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>  //不用写事件接收参数
    扩展为：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>message<span class="token punctuation">'</span></span> <span class="token attr-name"><span class="token namespace">@updata:</span>msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>val=&gt;message=val<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 如果需要绑定对象，直接使用v-bind --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">v-bind.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>obj<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>
    注意：这样会把obj对象里面的每一个属性(如title)都作为一个独立的prop传进入,在子组件的props填写时不能直接填写obj,需要填写obj里面的属性名(如title)
</code></pre></div><h4 id="兄弟组件数据传递"><a href="#兄弟组件数据传递" class="header-anchor">#</a> 兄弟组件数据传递</h4> <blockquote><p>创建一个新的vue实例，专门用于数据传递</p></blockquote> <ol><li>创建新的实例：var vm=new Vue()</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 组件A</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'事件名'</span><span class="token punctuation">,</span><span class="token parameter">msg</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 组件B</span>
vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'事件名'</span><span class="token punctuation">,</span>要发送的数据<span class="token punctuation">)</span>
</code></pre></div><h4 id="八种组件通信方式"><a href="#八种组件通信方式" class="header-anchor">#</a> 八种组件通信方式</h4> <p><strong>1. props / $emit</strong></p> <ul><li>父组件向子组件传值</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-article</span> <span class="token attr-name">:articles</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>articleList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-article</span><span class="token punctuation">&gt;</span></span>
// 子组件
props: ['articles']
</code></pre></div><p>称为单向数据流，prop不可被修改，只读属性</p> <ul><li>子组件向父组件传值</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-article</span> <span class="token attr-name">:articles</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>articleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@onEmitIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onEmitIndex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-article</span><span class="token punctuation">&gt;</span></span>
// 子组件
this.$emit('onEmitIndex', index) //父组件需要一个形参来接收这个数据
</code></pre></div><p><strong>2. $children / $parent 访问实例</strong></p> <ul><li>访问子组件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>messageA <span class="token operator">=</span> <span class="token string">'this is new value'</span>
<span class="token comment">// 使用$children可以直接访问方法，不需要$methods；</span>
</code></pre></div><ul><li>访问父组件实例</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>msg<span class="token punctuation">;</span>
</code></pre></div><p>$children的值是<strong>数组</strong>，$parent的值是<strong>对象</strong></p> <p>**使用场景： **填写自定义组件时，子组件可以通过访问$parent调用父组件里面的方法刷新列表，就不需要传入方法给子组件了；</p> <p>**3. provide / inject **</p> <blockquote><p>嵌套的组件传值（A是B的父组件，B是C的父组件）（隔代传值，需要有关系）</p></blockquote> <p>父组件使用provide提供变量，子组件使用inject注入变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// A组件定义</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> provide<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">for</span><span class="token operator">:</span> <span class="token string">&quot;demo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">//注册变量在data之外；</span>

<span class="token comment">// B组件</span>
name<span class="token operator">:</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span>

<span class="token comment">// C组件</span>
name<span class="token operator">:</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span>
inject<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'for'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>demo<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>for <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><strong>4. ref / refs</strong></p> <blockquote><p>ref如果在普通的DOM元素上使用，引用的指向就是DOM元素，如果用在子组件上，引用就指向组件实例，可以通过实例直接调用组件的方法或访问数据</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>comA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
this.$refs.comA;

// 由于变量名不能是中划线,如果是中划线可以使用中括号的形式
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>com-a<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
this.$refs['com-a']
</code></pre></div><p><strong>5. eventBus</strong></p> <p>事件总线，在Vue中可以使用它来作为沟通桥梁的概念，如同事件中心，可以向该中心注册发送事件或接收事件，所有组件都可以通知其他组件；</p> <p>注意：当项目较大，就容易造成难以维护的灾难</p> <ul><li>初始化事件总线， 在main.js中绑定到Vue实例化上</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>发送事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 组件A</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$eventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> num<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>接收事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 组件B</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$eventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token parameter">param</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">+</span> param<span class="token punctuation">.</span>num<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>移除事件监听者</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用eventBus要在组件销毁时卸载，否则会多次挂载，造成触发一次但多个响应的情况</span>
<span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$eventBus<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>6. vuex 状态管理器</strong></p> <p><strong>7. localStorage / sessionStorage</strong></p> <p><strong>8. $attrs 、 $listeners</strong></p> <p>在vue2.4以上，引入了$attrs和$listeners，新增了inheritAttrs选项</p> <p>inheritAttrs：默认为true，设置为false可以进行隔代传值，</p> <p>直接$attrs也行，不需要写任何东西；如果有写props指定了一个参数，则$attrs则少了一个属性值</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// A父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-com1</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:gender</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>女<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>158<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>程序员成长指北<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child-com1</span><span class="token punctuation">&gt;</span></span>

// A孩子child-com1组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child2</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>$attrs<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>  //
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    inheritAttrs<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 关闭自动挂载到组件根元素上没有在props声明的属性;</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> String<span class="token punctuation">}</span> <span class="token comment">//name作为props属性绑定</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//访问属性，如果被props指定了name，则该attrs就少了一个name;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

// child-com1孩子child2组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>age: {{ age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>childCom2: {{ $attrs }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  //被指定了age，则少了age
export default {
    inheritAttrs: false,
    props: {age: String}
    created(){console.log(this.$attrs)}
}
</code></pre></div><p><strong>总结</strong></p> <p>常见使用场景可以分为三类</p> <ul><li>父子组件通信: props; $parent / $children; provide / inject ; ref ; $attrs / $listeners</li> <li>兄弟组件通信: eventBus ; vuex</li> <li>跨级通信: eventBus；Vuex；provide / inject 、$attrs / $listeners</li></ul> <h2 id="二、插槽"><a href="#二、插槽" class="header-anchor">#</a> 二、插槽</h2> <h4 id="单一插槽"><a href="#单一插槽" class="header-anchor">#</a> 单一插槽</h4> <ul><li>使用&lt;slot&gt;标签放在组件内，在使用组件时，在内部插入的内容会显示在slot标签内</li> <li>slot的默认值：当没有给子组件传递内容的时候会显示，传递的内容也可以是标签</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>这里的内容会传递到子组件去<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>

// 子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>这里是默认值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="具名slot"><a href="#具名slot" class="header-anchor">#</a> 具名slot</h4> <ul><li>给slot起name名：&lt;slot name='header'&gt;&lt;/slot&gt;</li> <li>标签带上slot名：&lt;div slot='header'&gt;&lt;/div&gt;会插入到相应的位置</li> <li>如果多个slot，填写内容时不带slot的name名，则会写入到slot没有写name名的那个标签</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>header<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>this is h1 label<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>
// 2.6.0之后，可以简写slot插槽名字，使用#；
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

// 子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>header<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> // 默认放置位置，隐含default名字
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selection</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="slot通讯"><a href="#slot通讯" class="header-anchor">#</a> slot通讯</h4> <ul><li>子传父，子组件将数据绑定到slot上面，父组件使用template标签的slot-scope属性，可以自定义名字；</li> <li>注意：只能是template标签作用：子组件放slot，绑定默认的年龄，之后父组件给真实的年龄</li></ul> <p>作用：子组件放slot，绑定默认的年龄，之后父组件给真实的年龄</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>scope<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        {{$log(scope)}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{scope.age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>

// 子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>age<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        {{age}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
data(){
    return {
        age: 18
    }
}
</code></pre></div><h4 id="v-slot"><a href="#v-slot" class="header-anchor">#</a> v-slot</h4> <ul><li>在2.6.0之后slot，slot-scope和slot被弃用了，使用v-slot代替全部，v-slot可以缩写#</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 绑定对应的具名插槽
新语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
缩写：  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
旧语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>header<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

// 绑定作用域
新语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>defaultProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
缩写：  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>defaultProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
旧语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>defaultProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
// v-slot='scope'其实是 v-slot:default的缩写, #缩写必须取具名插槽的名;

// 对应具名插槽的作用域
新语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>headerProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
缩写：  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>headerProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
旧语法：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>header<span class="token punctuation">'</span></span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>headerProp<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>slot插槽也可以是解构，v-slot绑定的作用域的值是一个对象，对象里面是子组件绑定到slot标签上的props对象，因此需要解构</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>// 对象解构
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>{user}<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

// 解构重命名
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>{user:person}<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

// 解构默认值
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>{user={firstName:<span class="token punctuation">'</span></span><span class="token attr-name">Guest'}}'</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="多个slot处理"><a href="#多个slot处理" class="header-anchor">#</a> 多个slot处理</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeaderBar</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#left</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#center</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HeaderBar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="三、动态组件"><a href="#三、动态组件" class="header-anchor">#</a> 三、动态组件</h2> <blockquote><p>在标签上添加一个is特性来决定显示哪个组件，比较实用，等同于tab切换栏</p></blockquote> <ul><li><p>&lt;div :is=&quot;'组件名'&quot;&gt;&lt;/div&gt; 组件名记得加引号</p></li> <li><p>组件名也可以是一个变量，变量的值就是这个组件的名称；可以通过几个按钮更新这个变量，实现tab切换</p></li></ul> <p>**keep-alive **（可以给router-view）</p> <ul><li>动态组件每点击下一个则会直接销毁上一个</li> <li>使用&lt;keep-alive&gt;标签将添加了is特性的标签包裹起来，点击之后则会缓存下来当前的组件，不会销毁之前的组件，不再重新加载；主要用于保留组件状态，避免重新加载</li> <li>点击之后添加一个事件，并使用this.$children验证，显示多少个孩子</li> <li>因为打印时，会先输出console.log，会出现验证延迟，所以可以添加一个方法，this.$nextTick()，括号里面写一个回调函数，等待页面渲染完成之后再打印console.log</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>nextTick 可以让我们在下次 DOM 更新循环结束之后执行延迟回调，用于获得更新后的 DOM</p> <h2 id="四、v-once"><a href="#四、v-once" class="header-anchor">#</a> 四、v-once</h2> <ol><li><p>对于低开销（纯静态页面）元素可以添加v-once指令，来达到缓存效果，像友情链接之类的；</p></li> <li><p>对于有数据变化的元素，绝对不要加</p></li></ol> <h2 id="五、过滤器"><a href="#五、过滤器" class="header-anchor">#</a> 五、过滤器</h2> <blockquote><p>使用过滤器，直接修改原数据，并渲染页面</p></blockquote> <h4 id="创建过滤器"><a href="#创建过滤器" class="header-anchor">#</a> 创建过滤器</h4> <p>在实例当中定义过滤器的名字，定义过滤器必须返回值</p> <ul><li>全局过滤器</li></ul> <p>第一个参数是过滤器名字，第二个是一个函数</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'reverse'</span><span class="token punctuation">,</span><span class="token parameter">value</span><span class="token operator">=&gt;</span>val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>局部过滤器  局部过滤器大于全局过滤器</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>filters<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="过滤器的使用"><a href="#过滤器的使用" class="header-anchor">#</a> 过滤器的使用</h4> <p>常用于插值和v-bind表达式中</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{msg | reverse}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>msg | reverse<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>msg是需要进行过滤的参数，msg是需要进行过滤的参数，如果还需要传参，可以在<strong>过滤器加个小括号传参</strong></p> <h4 id="过滤器串联"><a href="#过滤器串联" class="header-anchor">#</a> 过滤器串联</h4> <p>下面的例子updateA进行过滤器msg再将结果传入updateB进行过渡，呈现最终结果</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{msg|updateA|updateB}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="过滤器和computed的区别"><a href="#过滤器和computed的区别" class="header-anchor">#</a> 过滤器和computed的区别</h4> <ul><li>computed只能针对定义的属性，进行更新处理，需要一个就添加一个函数</li> <li>过滤器可以定义一个，给需要过滤的属性添加，可以使用多次</li></ul> <h4 id="金钱过滤器-加逗号"><a href="#金钱过滤器-加逗号" class="header-anchor">#</a> 金钱过滤器 加逗号</h4> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'rmb-swich'</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    val <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> regstr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\d{3}/g</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> stm <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        stm <span class="token operator">+=</span> val<span class="token operator">+</span><span class="token string">','</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> stm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>regstr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        regstr <span class="token operator">=</span> regstr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> nums <span class="token operator">=</span> regstr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'￥'</span><span class="token operator">+</span>nums
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="六、自定义指令"><a href="#六、自定义指令" class="header-anchor">#</a> 六、自定义指令</h2> <ol><li>使用v-自定义属性名进行绑定标签，如果需要传参可以在等于后面传入参数，使用binding获取传入的参数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>input v<span class="token operator">-</span>focus<span class="token operator">&gt;</span>

directives<span class="token operator">:</span><span class="token punctuation">{</span>
    focus<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{</span>el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><p>可用的钩子函数及其参数</p> <ul><li>bind：第一次绑定到元素时调用，只调用一次</li> <li>unbind：DOM元素被vue移除时调用</li> <li>inserted：当被绑定的元素插入到DOM中时调用</li> <li>update：被绑定元素所在的模板更新时调用</li></ul></li> <li><p>自定义指令可用的钩子函数有两个形参</p> <ul><li>el：代表指令所绑定的元素</li> <li>binding：代表指令中详细内容，包括指令名称，参数，修饰符等</li></ul></li> <li><p>自定义指令简写</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>demo<span class="token operator">=</span><span class="token string">'{color:&quot;white&quot;,text:&quot;hello!&quot;}'</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// 可以直接传入对象字面量</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">.</span>color
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新：:</span> <span class="time">4/3/2020, 3:37:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Vue/vue-03 组件 Prop.html" class="prev">
        组件、Props
      </a></span> <span class="next"><a href="/Vue/vue-05 过渡 生命周期.html">
        过渡效果、生命周期
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.708942eb.js" defer></script><script src="/assets/js/2.c0515fc9.js" defer></script><script src="/assets/js/20.87ab9542.js" defer></script>
  </body>
</html>
