<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue路由 | 前端学习圈</title>
    <meta name="description" content="一位小菜鸡">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="preload" href="/h-note/assets/css/0.styles.846d8a10.css" as="style"><link rel="preload" href="/h-note/assets/js/app.0b2558df.js" as="script"><link rel="preload" href="/h-note/assets/js/2.c0515fc9.js" as="script"><link rel="preload" href="/h-note/assets/js/22.80366fcc.js" as="script"><link rel="prefetch" href="/h-note/assets/js/10.2e380b22.js"><link rel="prefetch" href="/h-note/assets/js/11.239f2ffe.js"><link rel="prefetch" href="/h-note/assets/js/12.1252e2bd.js"><link rel="prefetch" href="/h-note/assets/js/13.5a69210e.js"><link rel="prefetch" href="/h-note/assets/js/14.04c7578d.js"><link rel="prefetch" href="/h-note/assets/js/15.49d33c60.js"><link rel="prefetch" href="/h-note/assets/js/16.705387a2.js"><link rel="prefetch" href="/h-note/assets/js/17.a63df209.js"><link rel="prefetch" href="/h-note/assets/js/18.e7163079.js"><link rel="prefetch" href="/h-note/assets/js/19.dbb6e439.js"><link rel="prefetch" href="/h-note/assets/js/20.eaacc092.js"><link rel="prefetch" href="/h-note/assets/js/21.cdde55cc.js"><link rel="prefetch" href="/h-note/assets/js/23.a59a71b6.js"><link rel="prefetch" href="/h-note/assets/js/24.43542609.js"><link rel="prefetch" href="/h-note/assets/js/25.5aa0999d.js"><link rel="prefetch" href="/h-note/assets/js/26.860a3321.js"><link rel="prefetch" href="/h-note/assets/js/27.d470e820.js"><link rel="prefetch" href="/h-note/assets/js/28.9d6e98a7.js"><link rel="prefetch" href="/h-note/assets/js/29.c62fa83f.js"><link rel="prefetch" href="/h-note/assets/js/3.e6720376.js"><link rel="prefetch" href="/h-note/assets/js/30.16bd39fb.js"><link rel="prefetch" href="/h-note/assets/js/4.88f64118.js"><link rel="prefetch" href="/h-note/assets/js/5.3c7ae1e5.js"><link rel="prefetch" href="/h-note/assets/js/6.3c7d8a05.js"><link rel="prefetch" href="/h-note/assets/js/7.111ef821.js"><link rel="prefetch" href="/h-note/assets/js/8.e059ed78.js"><link rel="prefetch" href="/h-note/assets/js/9.18b72058.js">
    <link rel="stylesheet" href="/h-note/assets/css/0.styles.846d8a10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/h-note/" class="home-link router-link-active"><!----> <span class="site-name">前端学习圈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/h-note/" class="nav-link">
  home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title">web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h-note/app/" class="nav-link">
  app
</a></li><li class="dropdown-item"><!----> <a href="/h-note/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/h-note/html5、css3/" class="nav-link">
  html5、css3
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/h-note/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Server/" class="nav-link">
  Server
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/h-note/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/h-note/其他框架/" class="nav-link">
  其他框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h-note/custom/" class="nav-link">
  自定义页面
</a></li><li class="dropdown-item"><!----> <a href="https://chat.heny.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息传输站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/heny/h-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/h-note/" class="nav-link">
  home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title">web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h-note/app/" class="nav-link">
  app
</a></li><li class="dropdown-item"><!----> <a href="/h-note/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/h-note/html5、css3/" class="nav-link">
  html5、css3
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/h-note/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Server/" class="nav-link">
  Server
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/h-note/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/h-note/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/h-note/其他框架/" class="nav-link">
  其他框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h-note/custom/" class="nav-link">
  自定义页面
</a></li><li class="dropdown-item"><!----> <a href="https://chat.heny.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息传输站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/heny/h-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue文件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/h-note/Vue/vue-01 初识vue.html" class="sidebar-link">初识Vue</a></li><li><a href="/h-note/Vue/vue-02 修饰符 表单.html" class="sidebar-link">修饰符、表单</a></li><li><a href="/h-note/Vue/vue-03 组件 Prop.html" class="sidebar-link">组件、Props</a></li><li><a href="/h-note/Vue/vue-04 组件通讯 插槽.html" class="sidebar-link">组件通讯、插槽</a></li><li><a href="/h-note/Vue/vue-05 过渡 生命周期.html" class="sidebar-link">过渡效果、生命周期</a></li><li><a href="/h-note/Vue/vue-06 路由.html" class="active sidebar-link">Vue路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#一、路由" class="sidebar-link">一、路由</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#二、配置路由" class="sidebar-link">二、配置路由</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#三、动态路由" class="sidebar-link">三、动态路由</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#四、路由嵌套" class="sidebar-link">四、路由嵌套</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#五、router激活的类" class="sidebar-link">五、router激活的类</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#六、编程式导航" class="sidebar-link">六、编程式导航</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#七、命名视图" class="sidebar-link">七、命名视图</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#八、路由守卫" class="sidebar-link">八、路由守卫</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#八、路由实例方法" class="sidebar-link">八、路由实例方法</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#九、vue组件name作用" class="sidebar-link">九、vue组件name作用</a></li><li class="sidebar-sub-header"><a href="/h-note/Vue/vue-06 路由.html#十、vue的路由实现" class="sidebar-link">十、Vue的路由实现</a></li></ul></li><li><a href="/h-note/Vue/vue-07 接口请求 跨域.html" class="sidebar-link">接口请求、跨域</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue路由"><a href="#vue路由" class="header-anchor">#</a> Vue路由</h1> <p>[TOC]</p> <h2 id="一、路由"><a href="#一、路由" class="header-anchor">#</a> 一、路由</h2> <ul><li>后端路由：对于普通的网站，所有的超链接都是url地址，所有的url地址都对应服务器上对应的资源</li> <li>前端路由：在SPA单页面应用程序中，主要通过url中的<code>hash</code>（#号）来实现不同页面之间的切换；因为<code>hash</code>有个特点，http请求中不会包含<code>hash</code>相关的内容；</li></ul> <h4 id="搭建路由"><a href="#搭建路由" class="header-anchor">#</a> 搭建路由</h4> <ul><li>src/router/index.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  base<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// 默认为/, 针对页面的根路径</span>
  mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span> <span class="token comment">// 用来路由跳转的;</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/HelloWorld'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">'article'</span><span class="token punctuation">,</span> <span class="token comment">// children下面的地址访问是: /home/article;</span>
            name<span class="token operator">:</span> <span class="token string">'article'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/article'</span><span class="token punctuation">)</span> <span class="token comment">// '_'是占位符, 不用写小括号</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>修改main.js文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    router
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="二、配置路由"><a href="#二、配置路由" class="header-anchor">#</a> 二、配置路由</h2> <h4 id="配置方法"><a href="#配置方法" class="header-anchor">#</a> 配置方法</h4> <p>在src/router/index.js，导入组件名，并在routers里面配置路由</p> <ul><li><code>path</code> 为配置的路由地址</li> <li><code>name</code>为组件里面定义的name名字，组件里name名字还可以用在调试的时候；</li> <li><code>component</code> 为填写导入路由要显示的组件；</li></ul> <h4 id="路由显示"><a href="#路由显示" class="header-anchor">#</a> 路由显示</h4> <p>在app.vue文件中填写</p> <ul><li>路由中转：<font color="red">&lt;router-link to='/menu'&gt;</font>菜单<font color="red">&lt;/router-link&gt;</font></li> <li>用来显示要加载的组件：<font color="red">&lt;router-view/&gt;</font></li></ul> <h2 id="三、动态路由"><a href="#三、动态路由" class="header-anchor">#</a> 三、动态路由</h2> <h4 id="path路径"><a href="#path路径" class="header-anchor">#</a> path路径</h4> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token operator">:</span><span class="token string">'/movie/:id'</span>
path<span class="token operator">:</span> '<span class="token operator">/</span>shop<span class="token operator">/</span><span class="token operator">:</span>type<span class="token operator">/</span><span class="token operator">:</span>id<span class="token operator">?</span>  <span class="token comment">// 路由后面加问号表示可有可无</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">'/movie/123'</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">'{name:'</span>Movie'<span class="token punctuation">,</span>params<span class="token operator">:</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token comment">// 接收参数：$route.params.id  传递params必须使用路由的name名</span>
</code></pre></div><h4 id="查询字符串"><a href="#查询字符串" class="header-anchor">#</a> 查询字符串</h4> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token operator">:</span><span class="token string">'/movie'</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">'movie?id=123'</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">'{path:'</span>movie<span class="token string">',query:{id:123}}'</span><span class="token operator">&gt;</span>
<span class="token comment">// 接收参数：$route.query.id</span>
</code></pre></div><h4 id="使用props代替-route-params接收参数"><a href="#使用props代替-route-params接收参数" class="header-anchor">#</a> 使用props代替$route.params接收参数</h4> <ul><li>多个时</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>components<span class="token operator">:</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
props<span class="token operator">:</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">//true为支持props，false为不支持;</span>
</code></pre></div><ul><li>单个时</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>component<span class="token operator">:</span>a<span class="token punctuation">,</span>props<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="路由参数变化组件不更新"><a href="#路由参数变化组件不更新" class="header-anchor">#</a> 路由参数变化组件不更新</h4> <ul><li>解决方案一：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token keyword">from</span><span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 重新加载数据</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 方法二：设置路径变化时的处理函数</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        handler<span class="token operator">:</span> <span class="token string">'init'</span><span class="token punctuation">,</span>
        immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>解决方案二：</li></ul> <p>为了实现这样的效果可以给router-view添加一个不同的key，这样即使是公用组件，只要url变化了，就一定会重新创建这个组件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>$route.fullpath<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="四、路由嵌套"><a href="#四、路由嵌套" class="header-anchor">#</a> 四、路由嵌套</h2> <ol><li><p>在父路由填写：children:[{path:''...}...]</p> <p>注意：组件嵌套时，子路由的开头位置不要加 / 路径符</p></li> <li><p>填写router-link时，可以直接写路由name名称</p></li> <li><p>在父组件里面需要添加&lt;router-view/&gt;标签；要显示的位置</p></li> <li><p>使用redirect 实现路由重定向；指向另外一个地址</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>redirect<span class="token operator">:</span><span class="token string">'/account/login'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/account'</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="五、router激活的类"><a href="#五、router激活的类" class="header-anchor">#</a> 五、router激活的类</h2> <ol><li>在router/index.js文件中指定类名</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>linkActiveClass<span class="token operator">:</span><span class="token string">'myactive'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>；
</code></pre></div><ol start="2"><li>给router-link添加属性 active-class='select'，给select添加样式即可</li> <li>active-class被激活的路由，当路由为'/'路径和'/a'路径都会被添加类名，可以使用exact，精确激活，也可以使用exact-active-class='select'被精确激活</li></ol> <h2 id="六、编程式导航"><a href="#六、编程式导航" class="header-anchor">#</a> 六、编程式导航</h2> <ol><li><p><code>push</code>：this.$router.push(url)；跳转带历史记录</p></li> <li><p><code>replace</code>：this.$router.replace(url)；跳转不带历史记录</p></li> <li><p><code>go</code>：this.$router.go(num)；1为前进，-1为后退</p></li> <li><p>重复点击路由报错问题</p> <p>修改router/index.js文件，添加以下代码</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> originalPush <span class="token operator">=</span> <span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push<span class="token punctuation">;</span>
<span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">location</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">originalPush</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="route和-router的区别"><a href="#route和-router的区别" class="header-anchor">#</a> $route和$router的区别</h4> <ul><li><code>$route</code> 是“路由信息对象”，包括path，params，hash，query，fullPath，matched，name等路由信息参数。</li> <li><code>$router</code>是“路由实例”对象包括了路由的跳转方法，钩子函数等</li></ul> <h2 id="七、命名视图"><a href="#七、命名视图" class="header-anchor">#</a> 七、命名视图</h2> <p>定义多个router-view，实现一个url地址同时加载多个组件</p> <ul><li>在父组件里添加多个router-view，并添加name属性区分</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>left<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>在index.js文件里，导入父组件，并配置路由，在父组件里定义children，并给孩子定义一个path路径；在显示子组件时，记得带上子组件的path路径</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>children<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>components<span class="token operator">:</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token operator">:</span>组件<span class="token punctuation">,</span>name名<span class="token operator">:</span>组件<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>多个组件需要带s，components；default为不带name名的router-view</p> <h2 id="八、路由守卫"><a href="#八、路由守卫" class="header-anchor">#</a> 八、路由守卫</h2> <p>可以在路由地址变化的过程中进行一些验证</p> <p>场景：登录验证、VIP身份验证、只允许从组件A跳转到组件B,其它组件不允许跳转到组件B</p> <p>通过next可以阻止路由跳转，如果不调用next就不会执行下一步</p> <h4 id="全局守卫"><a href="#全局守卫" class="header-anchor">#</a> 全局守卫</h4> <p>填写位置：router/index.js</p> <ul><li>前置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
to<span class="token operator">:</span>目标位置<span class="token punctuation">,</span>   <span class="token keyword">from</span><span class="token operator">:</span>原始位置   <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  必须调用，否则不执行代码
<span class="token comment">// next()  进入到下一个钩子</span>
<span class="token comment">// next(false)  中断当前导航</span>
<span class="token comment">// next('/')或者next({path:''})   跳转到另一个地址</span>
<span class="token comment">// next({name: '', params: {}}) params传参需要使用路由的name名字来跳转;</span>
<span class="token comment">// next(error)  传递给onError()</span>
</code></pre></div><ul><li>后置（后置守卫没有next）主要处理跳转之后的操作, 不需要拦截</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="路由独享守卫"><a href="#路由独享守卫" class="header-anchor">#</a> 路由独享守卫</h4> <p>填写位置：router/index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    path<span class="token operator">:</span><span class="token string">'/menu'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>menu<span class="token punctuation">,</span>
    <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="组件内守卫"><a href="#组件内守卫" class="header-anchor">#</a> 组件内守卫</h4> <p>路由生命周期钩子函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 不能访问实例this </span>
    <span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 当动态路由/foo/:id, id改变时,页面不会有影响, 该方法会被调用</span>
    <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">//离开, 一般提示用户未保存修改离开</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>beforeRouteEnter</code>由于不能访问this，可以通过传一个回调给next来访问组件实例,<code>beforeRouteUpdate</code>和<code>Leave</code>不支持传递，因为他们可以访问this</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 通过vm访问组件实例</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="数据获取方式"><a href="#数据获取方式" class="header-anchor">#</a> 数据获取方式</h4> <ul><li>导航完成后获取数据</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span><span class="token operator">:</span> <span class="token string">'fetchData'</span> <span class="token comment">// 路由变化之后会重新获取数据</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> res<span class="token punctuation">.</span>list
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>导航完成前获取数据</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Loading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span>
<span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> loading <span class="token operator">=</span> Loading<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 在渲染时的等待界面添加Loading</span>
    <span class="token function">getPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        loading<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> vm<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> res<span class="token punctuation">.</span>list
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="watch监听路由"><a href="#watch监听路由" class="header-anchor">#</a> watch监听路由</h4> <div class="language-js extra-class"><pre class="language-js"><code>watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">$route</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    $route<span class="token punctuation">.</span><span class="token function">path</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    $route<span class="token operator">:</span> <span class="token string">'fetchData'</span> <span class="token comment">// 当路由发生变化会执行fetchData方法</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>父组件导入其它组件时，将其他子组件放在components引入；</p> <p>在路由中加载其他多个组件时，写多个router-view，在父路由写children定义多个components；</p> <h2 id="八、路由实例方法"><a href="#八、路由实例方法" class="header-anchor">#</a> 八、路由实例方法</h2> <ul><li>router.addRoutes</li></ul> <p>动态添加路由，当后台设置了admin权限之后，还要根据admin权限判断，是否显示或隐藏一部分路由</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 数组填写路由对象即可;</span>
</code></pre></div><h2 id="九、vue组件name作用"><a href="#九、vue组件name作用" class="header-anchor">#</a> 九、vue组件name作用</h2> <ol><li>当项目使用<code>keep-alive</code>时,可搭配组件name进行缓存过滤</li> <li>vue-devtools调试工具里显示的组件名称是由vue中组件name决定的</li> <li>在路由跳转传参时，可以不写path，直接写路由名称，并可以传递params参数</li></ol> <h2 id="十、vue的路由实现"><a href="#十、vue的路由实现" class="header-anchor">#</a> 十、Vue的路由实现</h2> <blockquote><p>使用hash模式和history两种模式实现</p></blockquote> <ul><li><code>hash</code>模式：在浏览器中符号“#”，#以及#后面的字符称之为hash，用 window.location.hash 读取。特点：hash虽然在URL中，但不被包括在HTTP请求中；用来指导浏览器动作，对服务端安全无用，hash不会重加载页面。</li> <li><code>history</code>模式：history采用HTML5的新特性；且提供了两个新方法： pushState()， replaceState()可以对浏览器历史记录栈进行修改，以及popState事件的监听到状态变更</li></ul> <p>注意：使用history需要对后端进行配置</p> <p>配置地址：<a href="/h-note/Vue/[https:/router.vuejs.org/zh/guide/essentials/history-mode.html#后端配置例子](https:/router.vuejs.org/zh/guide/essentials/history-mode.html#后端配置例子)">vue路由官网</a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新：:</span> <span class="time">4/3/2020, 3:37:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/h-note/Vue/vue-05 过渡 生命周期.html" class="prev">
        过渡效果、生命周期
      </a></span> <span class="next"><a href="/h-note/Vue/vue-07 接口请求 跨域.html">
        接口请求、跨域
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/h-note/assets/js/app.0b2558df.js" defer></script><script src="/h-note/assets/js/2.c0515fc9.js" defer></script><script src="/h-note/assets/js/22.80366fcc.js" defer></script>
  </body>
</html>
