# Server-02 linux 简单操作
## 一、linux的注意事项
1、linux严格区分大小写
2、linux中所有内容都以文件形式保存，包括硬件；
     硬盘文件是：/dev/sd[a-p]
     光盘文件是：/dev/sr0等
3、linux支持类型：
压缩包：.gz、.bz2、.tar.bz2、.tgz等
二进制软件包：.rpm
网页文件：.html、.php
脚本文件：.sh
配置文件：.conf
4、linux所有存储设备都必须挂载之后用户才能使用，包括硬盘、u盘和光盘
5、windows的应用程序不能直接在linux下运行；

## 二、各目录的作用
1、/bin/：存放系统命令的目录
2、/sbin/：系统环境设置相关的命令，只有超级用户能使用这些命令；
3、/usr/bin/：存放系统命令的目录；存放根文件系统不必要的系统管理命令；只有超级用户能使用；
4、/boot/：系统启动目录；
5、/dev/：设备文件保存位置
6、/etc/：配置文件保存位置；
7、/home/：普通用户的家目录；
8、/lib/：系统调用的函数库保存位置；
9、/lost+found/：系统出现意外的文件碎片存放位置；
10、/media/：挂载目录
11、/mnt/：挂载目录，建议挂载额外设备，比如u盘、光盘；
12、/misc/：挂载目录，建议用来挂载NFS服务的共享目录
13、/opt/：第三方安装的软件保存位置；
14、/proc/：虚拟文件系统，该目录的数据保存在内存当中；
15、/sys/：虚拟文件系统，主要是保存内核相关信息
16、/root/：超级用户的家目录；
17、/srv/：服务数据目录
18、/tmp/：临时目录，建议每次系统启动清空一下；
19、/usr/：系统软件资源目录，是（Unix Softwre Resource）;
20、/var/：动态数据保存位置，主要是缓存、日志


## 三、服务器注意事项
1、远程服务不允许关机，只能重启；
2、重启时应该关闭服务
3、不要在服务器访问高峰运行高负载命令；
4、远程配置防火墙时，不要把自己踢出服务器；
5、指定合理的密码规范并定期更新；
6、合理分配权限
7、定期备份重要数据和日志；


## 四、ls命令
1、ls：显示目录文件（/bin/ls），选项[-ald] [文件或目录]
    例：ls -a /home
-a 显示所有文件，包括隐藏文件
-l 详细信息显示
-d 查看目录属性；

2、基本属性
文件类型：（- 文件 d 目录 l 软链接文件）
u 所有者 g所属组 o其他人；
r 读 w 写 x执行；  x执行：可以执行文件或进入目录等；


## 五、 文件操作命令
1、命令格式：命令 [-选项] [参数]
创建目录：mkdir (-p可以递归创建)
创建文件：touch
生成链接文件：ln -s [old][new]  -s生成软链接；
类似window快捷方式；软链接的文件权限都是rwxrwxrwx；

删除空目录：rmdir
删除文件：rm -rf 文件或目录   r强行删除，f强制执行；
shopt -s extglob执行之后可以执行：rm -rf !(排除的某个文件不被删除)
shopt -s ，查看extglob是否为on

复制：cp -rp [old][new]   r复制p保留文件属性；
剪切或重命名：mv [old][new]


查看命令：
cd 切换目录；
pwd 显示当前目录
ls 显示所有文件
ll 显示所以文件包含文件属性；


显示文件内容
cat 正序显示； -n显示行号；
tac 反向列示
more 分页显示（f或空格翻页，enter换行，q或Q退出）
less 分页显示，可以向上翻页；
head 显示文件前面几行；（在文件前面添加-n，指定行数）
tail 显示文件后面几行（-n，指定行数）


## 六、权限管理命令
1、chmod：改变文件或目录权限（/bin/chmod）
chmod [{ugoa}{+-=}{rwx}] [文件或目录]
    [mode=421] [文件或目录]
    -R 递归修改；
2、权限的数字表示：r=4  w=2 x=1； 示例：rwxrw-r--   764
示例：chmod g+w testfile    赋予testfile文件所属组添加写权限
  chmod -R 777 testdir    修改testdir目录下所有文件具有全部权限；
3、chown：改变文件或目录的所有者（/bin/chown）
chown [用户] [文件或目录]
4、chgrp：改变文件或目录的所属组（/bin/chgrp）
chgrp [用户组] [文件或目录]
5、umask：显示、设置文件的缺省权限（shell内置）
umask [S]    -S以 rwx形式显示新建文件缺省权限


## 七、搜索
1、find：文件搜索（/bin/find）
find [搜索范围] [匹配条件]

2、find /etc -name init
在目录etc查找文件init    -iname可以不区分大小写

3、find / -size +204800
在根目录下查找大于100M的文件    +n 大于 -n 小于 n 等于

4、find /home -user shenchao
在根目录下查找所有者为shencao的文件    -group根据所属组找

5、find /etc -cmin -5
在etc下查找5分钟内被修改过属性的文件和目录
-amin 访问时间    -cmin 文件属性    -mmin 文件内容

6、find /etc -size +163840 -a -size -204800
查找大于80MB小于100MB文件      -a 两个条件同时满足    -o满足一个

7、find /etc -name inittab -exec ls -l {} \;
查找initab文件并显示其详细信息        -exec/-ok  命令    {} \对搜索结果执行操作

8、-type 根据文件类型查找；  f文件 d目录 l软链接
      -inum 根据i节点查找；

9、locate：在文件资源库中查找（/usr/bin/locate）
locate 文件名

12、grep：在文件中搜寻字串匹配的行并输出
grep -iv [指定字串] [文件]     -i不区别大小写 -v排队指定字串


## 八、帮助命令
1、which 命令                        搜索命令所在目录及别名信息；
2、whereis [命令名称]            搜索命令所在目录及帮助文档路径；
3、man [命令或配置文件]        获得帮助信息；
4、help 命令                           获得内置shell命令的帮助信息；


九、用户管理命令
1、useradd 用户名            添加新用户，root用户执行；
2、passwd 用户名             设置用户密码；
3、who                             查看登录用户信息；
4、w                                 查看登录用户详细信息；


## 十、压缩解压
1、gzip [文件]                                     压缩文件，压缩后格式.gz；
     gunzip [压缩文件]                           解压压缩.gz的文件；

2、tar [-zcf] [压缩后文件名] [目录]       打包目录，格式.tar.gz
	* c  创建tar包
	* v  显示详细信息
	* f  指定文件名
	* z  通过gzip压缩或解压
	* t  不解压查看包内容


    解压：x 解包，z解压缩，-f，-v；

// 压缩: 
[]# tar -zcvf build.tar.gz ./build
// 解压:
[]# tar -zxvf build.tar.gz

// 打包当前文件夹所有文件
[]# tar -cvf build.tar *

// 查看当前包的内容
[]# tar -tvf build.tar
注意：添加了z，手动打开压缩包看到的只是一个文件，该文件需要再次解压，如果是直接输入zxvf命令解压则不用在意；

3、zip [-r] [压缩后的文件名] [文件或目录]        压缩文件或目录，格式zip；
-r 压缩目录；
     解压：unzip [压缩文件]

4、bzip2 [-k] [文件]                          压缩后格式.bz2；-k产生压缩文件后保留原文件；
     解压：bunzip2 [-k] [压缩文件]     -k解压缩后保留原文件；
     tar -xjf Japan.tar.bz2    j可以解压bzip2的文件；

5、解压rar文件

[root@gaojingbo ~]# wget http://www.rarlab.com/rar/rarlinux-x64-5.3.0.tar.gz
[root@gaojingbo ~]# tar -xf rarlinux-x64-5.3.0.tar.gz
[root@gaojingbo ~]# cd rar
[root@gaojingbo rar]# make

解压: rar x 压缩文件
解压: rar a 生成的压缩文件的名字 待压缩的文件或目录



## 十一、网络命令
1、write  用户名          给用户发信息，以ctrl+d保存结束；
2、wall  [message]     发广播信息，给广播发信息；
3、ping [-c] ip地址     测试网络连通性，-c指定发送次数；
4、mail [用户名]         查看发送电子邮件
5、last                        列出目前与过去登入系统的用户信息；
6、lastlog                   检查某特定用户上次登录的时间
lastlog -u 500；      通过uid查看指定用户的登录信息；
7、traceroute 地址          显示数据包到主机间的路径；
8、netstat [选项]             显示网络相关信息；
    -t TCP协议；-u UDP协议；-l 监听；-r 路由 -n 显示ip地址和端口号
    示例：netstat -tlun 查看本地监听的端口
      netstat -an   查看本机所有的网络连接；
      netstat -rn   查看本机路由表；
9、setup        配置网络；
10、mount [-t文件系统] 设备文件名 挂载点
mount -t iso9660 /dev/sr0 /mnt/cdrom；


## 十二、关机开机


## 十三、vim
vi为黑色，vim为红色
1、三种状态：
	* Command：任何输入都会作为编辑命令，而不会出现在屏幕上，任何输入都引起立即反映
	* Insert：任何输入的数据都置于编辑寄存器，按ESC，可跳回command方式
	* Escape：以':'或者'/'为前导的指令，出现在屏幕的最下一行，任何输入都被当成特别的指令



2、离开命令
	* ZZ 保存当前文件并退出Vi
	* :q!     离开vi，并放弃刚在缓存区编辑的内容
	* :wq   将缓冲区内的资料写入磁盘中，并离开vi
	* :x    同:wq（:X是文件加密，需要区分一下）



3、进入输入模式
	* a   光标之后输入
	* A  行末输入
	* i    光标之前输入
	* I   行首输入
	* o  向下新增一行
	* O 向上新增一行



4、删除、修改、撤销
	* x  删除光标下的字
	* X  删除光标之前的字
	* D 删除当前光标至行尾的内容
	* dd 删除整行
	* dgg 删除当前光标至文件头的内容
* :10,20d  删除第10行至20行的资料
* :10d  删除第10行
* :%d  删除整个编辑缓冲区
* cc 修改整行的内容
* r   修改当前光标的文字
* R  进入修改模式直到ESC退出为止
* u 恢复最后一个指令之前的结果
* U 恢复光标该行的所有改变
* ctrl+r  恢复撤消前的内容



5、光标移动
* m<a-z> 设置书签<a-z>
* `<a-z> 移至书签<a-z>处
* 0 移至行首
* $ 移至行末
* e 移到下个字的最后一个字母
* w 移动到下个字的第一个字母
* b 移动到上个字的第一个字母
* ^ 移至该行的第一个字
* H 移至视窗的第一行
* M 移至视窗的中间那行
* L 移至视察的最后一行
* G  移至该文件的最后一行
* +  移至下一列的第一个字
* - 移至上一列的第一个字
* :n  移至该文件的第n列
* n+ 移至光标所在位置之后的第n列
* n-  移至光标所在位置之前的第n列
* <ctrl><g> 显示该行之行号、文件名称、文件中最末行之行号、光标所在行号占总行号之百分比



6、视窗的移动
* ctrl+f    视窗往下卷一页
* ctrl+b   视窗往上卷一页
* ctrl+d  视窗往下卷半页
* ctrl+u  视窗往上卷半页
* ctrl+e  视窗往下卷一行
* ctrl+y  视窗往上卷一行



7、选择、复制、剪切、删除
* v  从光标当前位置开始，经过的地方会被选中，再按v结束
* V  从光标当前行开始，光标经过的行都会被选中，再按一下V结束
* ctrl+v  从光标当前位置开始，选中光标起点和终点所构成的矩形区域，再按ctrl+v结束
* ggVG  选中全部的文本，其中gg为跳到行首，V选中整行，G末尾
* d  剪切
* y  复制
* p  粘贴
* yy 复制光标当前行



8、查找与替换
* /字串   光标之后寻找
* ?字串   光标之前寻找
* n   往下继续寻找下一个相同的字串
* N  往上继续寻找下一个相同的字串
* %  查找'(',')','{','}'的配对符
* s  搜寻某行列范围
* g  搜寻整个编辑缓冲区的资料
* :1,$s/old/new/g    将文件中所有old改成new
* :10,20s/%^/ /  将10行至20行资料的最前面插入5个空白
* /字符串   后边输入查询内容可保存至缓冲区，可用箭头上下进行以往内容选择
* 将光标移动在选定单词下方按*，则可以选中此单词作为查询字符



9、 环境的设定
* :set all  可设置的环境变量列表
* :set   环境变量的当前值
* :set nu   设定资料的行号。
* :set nonu  取消行号设定。
* :set ai   自动内缩。
* :set noai   取消自动内缩。


(vim) 
* :set ruler  会在屏幕右下角显示当前光标所处位置，并随光移动而改变，占用屏幕空间较小，使用也比较方便，推荐使用。
* :set hlsearch 在使用查找功能时，会高亮显示所有匹配的内容。
* :set nohlsearch  关闭此功能。
* :set incsearch  使Vim在输入字符串的过程中，光标就可定位显示匹配点。
* :set nowrapscan 关闭查找自动回环功能，即查找到文件结尾处，结束查找；默认状态是自动回环




## 十四、linux修改中文系统
1、locale -a查看是否有zh_CN.UTF-8，如果有则进行下一步，没有自行百度安装
2、使用vim打开locale.conf文件

vim /etc/locale.conf
3、编辑文件后保存退出

LANG="zh_CN.UTF-8" // en_US.UTF-8为英文
4、最后重启 reboot