(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{429:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-02-路由、path、模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-02-路由、path、模块"}},[t._v("#")]),t._v(" node-02 路由、path、模块")]),t._v(" "),a("h2",{attrs:{id:"一、线程和进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、线程和进程"}},[t._v("#")]),t._v(" 一、线程和进程")]),t._v(" "),a("p",[t._v("进程：相当于一个工厂，启动一个应用程序就对应一个进程；")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("  PHP java他们是多线程的 而Nodejs是单线程\n")])])]),a("p",[t._v("线程：相当于工人，线程是真正来工作的；")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("Nodejs 单线程 异步非阻塞 事件驱动，node.js如果有一条线挂了，后面也就无法执行了；\n")])])]),a("h2",{attrs:{id:"二、路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、路由"}},[t._v("#")]),t._v(" 二、路由")]),t._v(" "),a("p",[t._v("http : //localhost :400/index.html?id=40;")]),t._v(" "),a("p",[t._v("协议    域名    端口    目录   内容；")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n│                                              href                                              │\n├──────────┬──┬─────────────────────┬────────────────────────┬───────────────────────────┬───────┤\n│ protocol │  │        auth         │          host          │           path            │ hash  │\n│          │  │                     ├─────────────────┬──────┼──────────┬────────────────┤       │\n│          │  │                     │    hostname     │ port │ pathname │     search     │       │\n│          │  │                     │                 │      │          ├─┬──────────────┤       │\n│          │  │                     │                 │      │          │ │    query     │       │\n"  https:   //    user   :   pass   @ sub.example.com : 8080   /p/a/t/h  ?  query=string   #hash "\n│          │  │          │          │    hostname     │ port │          │                │       │\n│          │  │          │          ├─────────────────┴──────┤          │                │       │\n│ protocol │  │ username │ password │          host          │          │                │       │\n├──────────┴──┼──────────┴──────────┼────────────────────────┤          │                │       │\n│   origin    │                     │         origin         │ pathname │     search     │ hash  │\n├─────────────┴─────────────────────┴────────────────────────┴──────────┴────────────────┴───────┤\n│                                              href                                              │\n└────────────────────────────────────────────────────────────────────────────────────────────────┘\n')])])]),a("ol",[a("li",[a("p",[t._v("路由：node.js中的路由实际上是url中的path部分；")]),t._v(" "),a("p",[t._v("了解：生活上的路由主要是来化分网段的；")]),t._v(" "),a("p",[t._v("路由可以根据你定的规则自动匹配页面")])]),t._v(" "),a("li",[a("p",[t._v("URL:网址后面的路径，又可以称为路由；")])]),t._v(" "),a("li",[a("p",[t._v("http模块中：req是请求，res是响应；")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("     req.url:获取访问目录；    \n")])])])]),t._v(" "),a("li",[a("p",[t._v("设计路由：实际上就是根据不同的path路径返回不同的响应；")])])]),t._v(" "),a("h2",{attrs:{id:"三、全局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、全局"}},[t._v("#")]),t._v(" 三、全局")]),t._v(" "),a("p",[t._v("在node.js中的全局不是window，而是global;")]),t._v(" "),a("h2",{attrs:{id:"三、模块化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、模块化"}},[t._v("#")]),t._v(" 三、模块化")]),t._v(" "),a("p",[t._v("了解：在前端之前是没有模块化的概念，ES5以前是没有模块化的概念的。到ES6才提出模块化。")]),t._v(" "),a("p",[t._v("需要什么功能就去require什么功能，这个功能就是对应的模块功能；")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("模块分为三种：内置模块，自定义模块，第三方模块；")]),t._v(" "),a("p",[t._v("第三方社区的模块: "),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"四、内置path与url模块："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、内置path与url模块："}},[t._v("#")]),t._v(" 四、内置path与url模块：")]),t._v(" "),a("p",[t._v("一般path与url搭配使用；")]),t._v(" "),a("p",[t._v("path和url常用方法：")]),t._v(" "),a("p",[t._v("url.path();               将url地址转换成一个对象，里面是将每一串地址都进行分隔了；")]),t._v(" "),a("p",[t._v("path.join();             将一系列路径拼接成完整路径，中间会使用/来连接每一个字符串；")]),t._v(" "),a("p",[t._v("path.resolve();       拼接绝对路径；")]),t._v(" "),a("p",[t._v("path.extname();     获取path的扩展名；")]),t._v(" "),a("p",[t._v("path.extname('1.txt')  获取txt")]),t._v(" "),a("p",[t._v("path.basename(p,"),a("code",[t._v("[ext]")]),t._v(")  第二个参数为要去除的后缀")]),t._v(" "),a("p",[t._v("url.path(urls,true)；    加上true后使用query返回一个对象")]),t._v(" "),a("p",[t._v("?user=hny&pass=123456&cont=哈哈")]),t._v(" "),a("p",[t._v("分解成:  {user:hny,pass:123456,cont:哈哈}")]),t._v(" "),a("p",[t._v("注意：使用path.resolve必须使用相当路径，第二个路径需要加./；")]),t._v(" "),a("h2",{attrs:{id:"五、自定义模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、自定义模块"}},[t._v("#")]),t._v(" 五、自定义模块")]),t._v(" "),a("ol",[a("li",[t._v("在node当中，一个js文件就是一个模块。每一个js文件都是封闭的空间，模块与模块之间是互不影响的，因为模块是有一个隐藏的匿名函数包起来的；")])]),t._v(" "),a("p",[t._v("arguments.callee属性包含当前正在执行的函数 ，调用arguments.callee.toString()返回这个匿名函数；")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("模块的引入：")])]),t._v(" "),a("p",[t._v("（1）引入自定义模块时，文件路径要以./或../开头；（因为它以为你要加载的是系统模块）")]),t._v(" "),a("p",[t._v("（2）如果不加扩展名，会以.js--.json--.node去引用；")]),t._v(" "),a("p",[t._v("（3）当引用一个文件夹时，默认引用index.js；")]),t._v(" "),a("p",[t._v("（4）只要是require文件，就一定返回一个对象。不是null")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("自定义语法：")]),t._v(" "),a("p",[t._v("单个暴露：")]),t._v(" "),a("p",[t._v("exports.属性/方法 = 属性值/函数；")]),t._v(" "),a("p",[t._v("module.exports.属性/方法 = 属性值/函数；")]),t._v(" "),a("p",[t._v("多个暴露：")]),t._v(" "),a("p",[t._v("module.exports = {};")]),t._v(" "),a("p",[t._v("单个和多个不能混着写；")]),t._v(" "),a("p",[t._v("注意：exports是module.exports的变量，模块最终返回的是module.exports；")])])]),t._v(" "),a("h2",{attrs:{id:"六、第三方模块-官网"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、第三方模块-官网"}},[t._v("#")]),t._v(" 六、第三方模块 "),a("a",{attrs:{href:"https://www.npmjs.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1)]),t._v(" "),a("ol",[a("li",[t._v("安装第三方包：npm install <包名>   install也可以写成i；")])]),t._v(" "),a("p",[t._v("安装之后在项目文件夹下，会自动生成一个dependencies-lock.json配置文件，里面有第三方依赖包，项目依赖和说明书配置文件是package.json；")]),t._v(" "),a("p",[t._v("在npm install会自动检查目录下的package.json，并自动安装所属依赖；")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("创建package.json文件：npm init 你问我答创建，后面加-y，可以自动完成；")])]),t._v(" "),a("li",[a("p",[t._v("给别人发包的时候，直接发送package.json文件就可以了，这个里面dependencies属性记录了所有项目依赖包，这时直接输入npm install 或 npm i就可以下载所有的项目依赖包；")])]),t._v(" "),a("li",[a("p",[t._v("为什么要把第三方包下载到根路径？")])])]),t._v(" "),a("p",[t._v("（1）如果没有加./和../就是以包名来被require的；")]),t._v(" "),a("p",[t._v("（2）先找内置模块---再找node_modules文件夹----再往上一级---最后到盘符根路径----最后报错；")]),t._v(" "),a("p",[t._v("mime模块：获取文件的扩展名，")]),t._v(" "),a("p",[t._v("getType()；括号直接放文件名就可以了，不需要单独的路径；")]),t._v(" "),a("p",[t._v("getExtension()；括号放类型，给后缀名；")]),t._v(" "),a("p",[t._v("开放静态页面到网上：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mi "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mime'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" urls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/index.html'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取路径")]),t._v("\n    fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/baofeng")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("urls"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("mi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("urls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(";charset='utf-8'")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//mime模块直接获取后缀名并转换；")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'监听完成.......'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);