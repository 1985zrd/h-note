(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{464:function(t,a,s){"use strict";s.r(a);var e=s(19),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"小程序-04-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序-04-api"}},[t._v("#")]),t._v(" 小程序-04  API")]),t._v(" "),s("h2",{attrs:{id:"一、路由跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、路由跳转"}},[t._v("#")]),t._v(" 一、路由跳转")]),t._v(" "),s("ol",[s("li",[t._v("wx.redirectTo(object)：重定向，对tabBar不管用；")]),t._v(" "),s("li",[t._v("wx.navigateTo() 打开新页面，保留当前页面（有返回按钮），对tabBar不管用；")]),t._v(" "),s("li",[t._v("wx.navigateBack()；返回；不需要写参数；")]),t._v(" "),s("li",[t._v("wx.switchTab()；tab切换，只能切换tabBar页面；")]),t._v(" "),s("li",[t._v("wx.reLaunch()   关闭所有页面，重定向，可以打开任意页面")])]),t._v(" "),s("p",[t._v("属性：url ，路径填写pages下的组件；记得带上/；如：/pages/info/info；")]),t._v(" "),s("p",[t._v("events，页面通过接口，当数据过多时，可以使用；")]),t._v(" "),s("p",[t._v("查看官网地址："),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("getCurrentPages()  获取当前页面路由；")]),t._v(" "),s("p",[t._v("注意：调用页面路由带的参数可以在onLoad中获取；")]),t._v(" "),s("h2",{attrs:{id:"二、界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、界面"}},[t._v("#")]),t._v(" 二、界面")]),t._v(" "),s("ol",[s("li",[t._v("wx.showToast({})   显示消息提示框，会自动消失")])]),t._v(" "),s("ul",[s("li",[t._v("title： 提示的内容")]),t._v(" "),s("li",[t._v("icon： 图标")]),t._v(" "),s("li",[t._v("image： 自定义图标的本地路径")]),t._v(" "),s("li",[t._v("duration： 提示的延迟时间")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("showLoading({})    显示loading提示框，需调用wx.hideLoading()才能关闭；")])]),t._v(" "),s("li",[s("p",[t._v("wx.showsModal({})   显示模态对话框  有确定取消按钮")])])]),t._v(" "),s("ul",[s("li",[t._v("title： 提示标题")]),t._v(" "),s("li",[t._v("content： 提示内容")]),t._v(" "),s("li",[t._v("success： 接口调用成功的回调")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("wx.showActionSheet   显示操作菜单")])]),t._v(" "),s("ul",[s("li",[t._v("itemList： 数组或字符串，按钮的文字数组，最多6个；")]),t._v(" "),s("li",[t._v("itemColor： 文字颜色")]),t._v(" "),s("li",[t._v("success：成功的回调；res返回用户点击的按钮序号；")]),t._v(" "),s("li",[t._v("fail： 用户点击取消触发；")])]),t._v(" "),s("h2",{attrs:{id:"三、数据缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、数据缓存"}},[t._v("#")]),t._v(" 三、数据缓存")]),t._v(" "),s("ol",[s("li",[t._v("设置")])]),t._v(" "),s("p",[t._v("wx.setStorage({})  设置缓存   以key，data存取；success为成功的回调；")]),t._v(" "),s("p",[t._v("wx.setStoargeSync(key,value)    同步设置  如果错误使用try,catch；")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("获取")])]),t._v(" "),s("p",[t._v("wx.getStorage({})  获取缓存  没有设置好也会调用，调用key获取")]),t._v(" "),s("p",[t._v("wx.getStoargeSync()    同步获取")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("移除")])]),t._v(" "),s("p",[t._v("wx.removeStorage({})  传入key，success为成功回调；")]),t._v(" "),s("p",[t._v("wx.removeStorageSync(key)    从本地缓存移除指定key")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("清除")])]),t._v(" "),s("p",[t._v("wx.clearStorageSync()  同步清除缓存")]),t._v(" "),s("p",[t._v("wx.clearStorage();")]),t._v(" "),s("h2",{attrs:{id:"四、请求网络"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、请求网络"}},[t._v("#")]),t._v(" 四、请求网络")]),t._v(" "),s("ol",[s("li",[t._v("wx.request()    微信请求需要开启详情里面的不校验开启，上线需要在后台开发设置添加合法域名，线上请求地址必须是https；")])]),t._v(" "),s("ul",[s("li",[t._v("url： 请求地址；")]),t._v(" "),s("li",[t._v("data： 一个对象，将需要传入的参数写入，也可以直接在url后面填写")]),t._v(" "),s("li",[t._v("success： 请求成功回调，注意this指向，可以在外面保留一下；")]),t._v(" "),s("li",[t._v("fail： 请求失败参数")]),t._v(" "),s("li",[t._v("method： get/post")])]),t._v(" "),s("p",[t._v("技巧：减少请求的次数")]),t._v(" "),s("p",[t._v("（1）将请求的数据存放在Storage里面，做判断，将Storage赋为一个空，之后判断storage是否为空，如果为空则获取数据，并存入数据，如果不为空，则不获取；")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStorage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("（2）新建一个目录，放js文件，将json数据复制到一个变量上，将这个变量导出；之后在需要的目录下引入该文件；引入必须填写相对路径；")]),t._v(" "),s("h2",{attrs:{id:"五、微信分享"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、微信分享"}},[t._v("#")]),t._v(" 五、微信分享")]),t._v(" "),s("ol",[s("li",[t._v("链接："),s("a",{attrs:{href:"https://qydev.weixin.qq.com/wiki/index.php?title=%E5%BE%AE%E4%BF%A1JS-SDK%E6%8E%A5%E5%8F%A3&oldid=1667",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://qydev.weixin.qq.com/wiki/index.php?title=%E5%BE%AE%E4%BF%A1JS-SDK%E6%8E%A5%E5%8F%A3&oldid=1667"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);