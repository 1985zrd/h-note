(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{379:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-09-插件开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-09-插件开发"}},[t._v("#")]),t._v(" Vue-09 插件开发")]),t._v(" "),a("h2",{attrs:{id:"一、创建自己的插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、创建自己的插件"}},[t._v("#")]),t._v(" "),a("strong",[t._v("一、创建自己的插件")])]),t._v(" "),a("ul",[a("li",[t._v("目录结构\n"),a("ol",[a("li",[t._v("lib下面是我们所有的插件，创建一个新的插件名叫heny；")]),t._v(" "),a("li",[t._v("heny下的目录是lib和index.js还有一个test.vue文件；")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://notecdn.heny.vip/images/vue-09_%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.png",alt:"image-20200406215427082"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在heny/index.js文件写入")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在heny/lib/index.js写入以下代码")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" test "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./test.vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue.use默认使用install方法")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一个参数是Vue, 第二个参数是选项")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在test.vue文件可以写我们的公共组件代码了")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    哈哈"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 这是我的新插件\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("style lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'scss'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("在main.js主入口文件引入创建好的test插件")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" test "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib/heny'")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("直接在App.vue将标签放入，就可以直接使用了")])])]),t._v(" "),a("h2",{attrs:{id:"二、发布到npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、发布到npm"}},[t._v("#")]),t._v(" 二、发布到npm")]),t._v(" "),a("h3",{attrs:{id:"npm初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm初始化"}},[t._v("#")]),t._v(" npm初始化")]),t._v(" "),a("p",[t._v("进入lib/heny文件夹，并执行npm init命令")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("name")]),t._v("：包名，默认就是文件夹名字，但是这个名字是需要唯一的，如果你命的名字已经被使用过了，那就只能换个名字。查看是否被用，可以直接输入npm view 包名，如果报错即被使用")]),t._v(" "),a("li",[a("code",[t._v("version")]),t._v("：包的版本，默认是1.0.0， 你可以更换，例如0.1.0或2.0.1等。")]),t._v(" "),a("li",[a("code",[t._v("description")]),t._v("：包的描述。主要描述你的包是用来做什么的。")]),t._v(" "),a("li",[a("code",[t._v("entry point")]),t._v("：包入口文件，默认是Index.js，可以自定义。")]),t._v(" "),a("li",[a("code",[t._v("test command")]),t._v("：测试命令，这个直接回车就好了，因为目前还不需要这个。")]),t._v(" "),a("li",[a("code",[t._v("git repository")]),t._v("：包的git仓库地址，npm自动读取.git目录作为这一项的默认值。没使用则回车略过。")]),t._v(" "),a("li",[a("code",[t._v("keyword")]),t._v('：包的关键词。该项会影响到用户怎样才能搜到你的包，可以理解为搜索引擎悠哈的关键词。建议关键词要能准确描述你的包，例如："vpay vue-pay vue-password password"')]),t._v(" "),a("li",[a("code",[t._v("author")]),t._v("：作者。例如你的npm账号或者github账号")]),t._v(" "),a("li",[a("code",[t._v("license")]),t._v("：开源协议，回车就好。")])]),t._v(" "),a("h3",{attrs:{id:"忽略文件不上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#忽略文件不上传"}},[t._v("#")]),t._v(" 忽略文件不上传")]),t._v(" "),a("p",[t._v("创建"),a("code",[t._v(".npmignore")]),t._v("文件，和"),a("code",[t._v(".gitignore")]),t._v("差不多，希望哪些不发到npm包上面；")]),t._v(" "),a("h3",{attrs:{id:"上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传"}},[t._v("#")]),t._v(" 上传")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("测试插件是否可以上传到npm网上；")]),t._v(" "),a("p",[t._v("因为main.js引入时，都是从node_modules引入的，因此将lib/heny直接放入node_modules中，再引入的时候直接写：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" test "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'heny'")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("测试通过之后就可以直接开始发布到npmjs网上了；")])]),t._v(" "),a("li",[a("p",[t._v("注册npm账号")]),t._v(" "),a("p",[t._v("注册地址：https://www.npmjs.com/signup")])]),t._v(" "),a("li",[a("p",[t._v("登录npm账号")]),t._v(" "),a("p",[t._v("如果有设置了淘宝镜像需要先设置回镜像")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("npm config "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" registry http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npmjs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org\n")])])]),a("p",[t._v("之后执行npm login命令登录npm；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://notecdn.heny.vip/images/vue-09_%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91_02.png",alt:"image-20200406220434803"}})])]),t._v(" "),a("li",[a("p",[t._v("进入到项目的根目录，直接输入npm publish就发布成功了，直接到npmjs官网搜索包的name名字就有了；当然也可以直接在项目npm i 名字；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://notecdn.heny.vip/images/vue-09_%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91_03.png",alt:"image-20200406220541606"}})]),t._v(" "),a("p",[t._v("注意：第二次发布时，必须修改version版本号才能发布，否则会报错；")])])]),t._v(" "),a("h3",{attrs:{id:"自动修改版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动修改版本号"}},[t._v("#")]),t._v(" 自动修改版本号")]),t._v(" "),a("p",[t._v("npm version <update_type>")]),t._v(" "),a("p",[t._v("type值为：")]),t._v(" "),a("ul",[a("li",[t._v("patch  0.0.")]),t._v(" "),a("li",[t._v("minor  1.*.0")]),t._v(" "),a("li",[t._v("major  *.0.0")])]),t._v(" "),a("p",[t._v("其他npm管理包命令")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 撤销整个包")]),t._v("\nnpm unpublish "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("force 包名\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 撤销某个版本")]),t._v("\nnpm publish 包名@版本号\n")])])]),a("h2",{attrs:{id:"三、vue-extend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、vue-extend"}},[t._v("#")]),t._v(" 三、Vue.extend")]),t._v(" "),a("blockquote",[a("p",[t._v("Vue.extend属于Vue的全局API，在实际业务开发中很少使用，因为相比常用Vue.component写法使用extend更加麻烦，用于注册插件使用")])]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("Vue.extend")]),t._v("创建插件，传入一个组件，或者一个对象，里面写对应的组件")]),t._v(" "),a("p",[t._v("之后使用"),a("code",[t._v("$mount")]),t._v("挂载元素得到"),a("code",[t._v("$el")]),t._v("，将"),a("code",[t._v("$el")]),t._v("添加到"),a("code",[t._v("body")]),t._v("里面即可；")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用vue单组件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" CodeComponent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./CodeComponent.vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CodeComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("这是一个组件"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 挂载到body上")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("C")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"遇到的bug："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的bug："}},[t._v("#")]),t._v(" 遇到的bug：")]),t._v(" "),a("ol",[a("li",[t._v("发布npm包报错： https://blog.csdn.net/weixin_38080573/article/details/88080556")])])])}),[],!1,null,null,null);s.default=e.exports}}]);